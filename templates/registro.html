<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro</title>
  <link rel="stylesheet" href="/static/css/estilo.css" />
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
</head>
<body>
  <h2 class="titulo-formulario">Registro alumno</h2>
  <form action="/registro" method="POST" enctype="multipart/form-data">
    <div class="form-columns">
      <div class="column">
        <div class="mb-3">
          <label for="matricula">Matrícula</label>
          <input type="text" id="matricula" name="matricula" class="{% if error_field == 'matricula' %}input-error{% endif %}" value="{{ request.form.get('matricula', '') }}" required>
          {% if error_field == 'matricula' %}<div class="error-message">{{ error }}</div>{% endif %}
        </div>
        <div class="mb-3">
          <label for="nombre">Nombre(s)</label>
          <input type="text" id="nombre" name="nombre" value="{{ request.form.get('nombre', '') }}" class="{% if error_field == 'nombre' %}input-error{% endif %}" required>
          {% if error_field == 'nombre' %}<div class="error-message">{{ error }}</div>{% endif %}
        </div>
        <div class="mb-3">
          <label for="apellido_p">Apellido Paterno</label>
          <input type="text" id="apellido_p" name="apellido_p" value="{{ request.form.get('apellido_p', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="apellido_m">Apellido Materno</label>
          <input type="text" id="apellido_m" name="apellido_m" value="{{ request.form.get('apellido_m', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="carrera">Carrera</label>
          <input type="text" id="carrera" name="carrera" value="{{ request.form.get('carrera', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="genero">Género</label>
          <select id="genero" name="genero" required>
            <option value="">Selecciona un género</option>
            <option value="H" {% if request.form.get('genero') == 'H' %}selected{% endif %}>Hombre</option>
            <option value="M" {% if request.form.get('genero') == 'M' %}selected{% endif %}>Mujer</option>
            <option value="LGBTQ" {% if request.form.get('genero') == 'LGBTQ' %}selected{% endif %}>LGBTQ+</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="edad">Edad</label>
          <input type="number" id="edad" name="edad" value="{{ request.form.get('edad', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="nss">NSS</label>
          <input type="text" id="nss" name="nss" class="{% if error_field == 'nss' %}input-error{% endif %}" value="{{ request.form.get('nss', '') }}" required>
          {% if error_field == 'nss' %}<div class="error-message">{{ error }}</div>{% endif %}
        </div>
        <div class="mb-3">
          <label for="grado_grupo">Grado y Grupo</label>
          <input type="text" id="grado_grupo" name="grado_grupo" value="{{ request.form.get('grado_grupo', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="telefono">Teléfono</label>
          <input type="text" id="telefono" name="telefono" value="{{ request.form.get('telefono', '') }}" required>
        </div>
      </div>

      <div class="column">
        <div class="mb-3">
          <label for="tutor">Tutor(a)</label>
          <input type="text" id="tutor" name="tutor" value="{{ request.form.get('tutor', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="telefono_emergencia">Teléfono emergencia</label>
          <input type="text" id="telefono_emergencia" name="telefono_emergencia" value="{{ request.form.get('telefono_emergencia', '') }}" required>
        </div>
        <div class="mb-3">
          <label for="correo">Correo electrónico</label>
          <input type="email" id="correo" name="correo" class="{% if error_field == 'correo' %}input-error{% endif %}" value="{{ request.form.get('correo', '') }}" required>
          {% if error_field == 'correo' %}<div class="error-message">{{ error }}</div>{% endif %}
        </div>
        <div class="mb-3">
          <label for="taller_inscripcion">Taller Inscripción</label>
          <select id="taller_inscripcion" name="taller_inscripcion" required>
            <option value="">Selecciona un taller</option>
            {% for taller in ['voleibol','futbol7','futbolS','escolta','beisbol','atletismo','basquetbol','ajedrezC','ajedrezR','danza','porristas','banda_guerra'] %}
              <option value="{{ taller }}" {% if request.form.get('taller_inscripcion') == taller %}selected{% endif %}>{{ taller|capitalize }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="mb-3">
          <label for="horario">Horario</label>
          <select id="horario" name="horario" required>
            <option value="">Selecciona un horario</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="contrasena">Contraseña</label>
          <input type="password" id="contrasena" name="contrasena" required>
        </div>
        <div class="mb-3">
          <label for="confirmar">Confirmar contraseña</label>
          <input type="password" id="confirmar" name="confirmar" required>
        </div>
        <div class="mb-3" style="text-align: center;">
          <label for="foto_credencial">Foto credencial escolar</label>
          <input type="file" id="foto_credencial" name="foto_credencial" accept="image/*" style="display: none;">
          <label for="foto_credencial" class="foto-btn">
            <span class="plus-icon">+</span>
          </label>
        </div>
        <div class="mb-3" style="text-align: center;">
          <label for="nota_importante">Nota: El usuario para iniciar sesión <br> utilizará la matrícula,<br> verificar que sea correcta.</label>
        </div>
      </div>
    </div>

    <div class="button-container">
      <button type="submit" class="btn">Guardar registro</button>
    </div>
  </form>

  <script>
    const horariosPorTaller = {
      voleibol: ["Martes 14:00-17:00", "Jueves 14:00-16:00"],
      futbol7: ["Lunes 14:00-17:00"],
      futbolS: ["Martes 15:00-17:00", "Jueves 15:00-17:00"],
      escolta: ["Martes 14:00-15:00", "Jueves 14:00-15:00"],
      beisbol: ["Miércoles 14:00-16:00"],
      atletismo: ["Lunes 16:00-17:00", "Martes 16:00-17:00"],
      basquetbol: ["Lunes 13:00-16:00", "Martes 13:00-16:00"],
      ajedrezC: ["Miércoles 14:00-17:00"],
      ajedrezR: ["Martes 14:00-17:00", "Jueves 14:00-17:00"],
      danza: ["Martes 13:00-14:30", "Viernes 13:00-14:30"],
      porristas: ["Martes 14:30-16:00", "Viernes 14:30-16:00"],
      banda_guerra: ["Miércoles 14:00-17:00", "Viernes 14:00-17:00"]
    };

    document.getElementById('taller_inscripcion').addEventListener('change', function () {
      const taller = this.value;
      const horarioSelect = document.getElementById('horario');
      horarioSelect.innerHTML = '<option value="">Selecciona un horario</option>';
      if (horariosPorTaller[taller]) {
        horariosPorTaller[taller].forEach(horario => {
          const option = document.createElement('option');
          option.value = horario;
          option.textContent = horario;
          horarioSelect.appendChild(option);
        });
      }
    });
  </script>
</body>
</html>