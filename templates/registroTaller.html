<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Registro Taller</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilo.css') }}">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" rel="stylesheet">
</head>
    <body>
        <!-- Encabezado -->
<header class="mi-header">
    <img src="{{ url_for('static', filename='img/LOGO UTT.png') }}" alt="Logo UTT" height="150">
    <div>
    <center><h1>Sistema de control y gestión de talleres UTT</h1></center>
    <center><p>Universidad Tecnológica de Tlaxcala</p></center>
    </div>
    </header>
<hr class="linea-negra">
<br>
        <h2 class="titulo-formulario">Registro Taller</h2>

    <form action="/registroTaller" method="POST" enctype="multipart/form-data">
        <!-- Nombre del Taller -->
        <div class="mb-3">
            <label for="Nombre_T">Nombre Taller</label>
            <input type="text" id="Nombre_T" name="Nombre_T"
                value="{{ form_data.Nombre_T if form_data else '' }}"
                class="{% if 'Nombre_T' in errors %}input-error{% endif %}" required>
            {% if 'Nombre_T' in errors %}
                <div class="error-message">{{ errors['Nombre_T'] }}</div>
            {% endif %}
        </div>

        <!-- Nombre del Docente -->
        <div class="mb-3">
            <label for="Nombre_D">Nombre Docente</label>
            <input type="text" id="Nombre_D" name="Nombre_D"
                value="{{ form_data.Nombre_D if form_data else '' }}" required>
            {% if 'Nombre_D' in errors %}
                <div class="error-message">{{ errors['Nombre_D'] }}</div>
            {% endif %}
        </div>

        <!-- Días del Taller -->
        <div class="mb-3">
            <label>Días del Taller:</label><br>
            {% set dias = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'] %}
            {% for dia in dias %}
                {% set dias_t_list = form_data.get('dias_t[]') if form_data else [] %}
                <label>
                    <input type="checkbox" name="dias_t[]" value="{{ dia }}"
                        {% if dias_t_list and dia in dias_t_list %}checked{% endif %}
                        onchange="mostrarHorario('{{ dia }}')"> {{ dia }}
                </label><br>
            {% endfor %}
            <br>
        </div>

        <!-- Contenedor de Horarios -->
        <div class="mb-3">
            <div id="contenedor-horarios"></div>
        </div>

        <!-- Estatus -->
        <div class="mb-3">
            <label for="estatus">Estatus</label>
            <select id="estatus" name="estatus" required>
                <option value="">Selecciona un estatus</option>
                <option value="A" {% if form_data.estatus == 'A' %}selected{% endif %}>Activo</option>
                <option value="B" {% if form_data.estatus == 'B' %}selected{% endif %}>Baja</option>
                <option value="BT" {% if form_data.estatus == 'BT' %}selected{% endif %}>Baja Temporal</option>
            </select>
            {% if 'estatus' in errors %}
                <div class="error-message">{{ errors['estatus'] }}</div>
            {% endif %}
        </div>

        <!-- Botón -->
        <div class="button-container">
            <button type="submit" class="btn">Guardar registro</button>
        </div>
    </form>

    <!-- JavaScript para mostrar horarios -->
    <script>
        function mostrarHorario(dia) {
            const contenedor = document.getElementById("contenedor-horarios");
            const idGrupo = "grupo_" + dia;

            // Si el checkbox fue marcado
            const checkbox = document.querySelector('input[value="' + dia + '"]');
            if (checkbox.checked && !document.getElementById(idGrupo)) {
                const div = document.createElement("div");
                div.id = idGrupo;
                div.innerHTML = `
                    <label>${dia}:</label>
                    <input type="time" name="horario_${dia}_inicio" required>
                    <input type="time" name="horario_${dia}_fin" required><br>
                `;
                contenedor.appendChild(div);
            } else if (!checkbox.checked && document.getElementById(idGrupo)) {
                document.getElementById(idGrupo).remove();
            }
        }

        // Al cargar la página: mostrar horarios marcados previamente
        window.onload = function () {
            const diasSeleccionados = {{ form_data.getlist('dias_t[]') | tojson | safe if form_data else '[]' }};
            diasSeleccionados.forEach(function (dia) {
                mostrarHorario(dia);
            });
        };
    </script>
    <!-- Pie de página -->
<footer class="footer-personalizado text-white mt-5">
    <div class="container container-footer">
    <div class="row justify-content-between align-items-start">

    <!-- Columna 1: Contacto -->
    <div class="col-md-4 footer-col">
        <p><strong>Comunícate:</strong></p>
        <p>contacto@uttlaxcala.edu.mx</p>
        <p>(247) 47-25-300</p>
        <div class="social-icons mt-2">
    <a href="https://www.facebook.com/share/1ZRmk4uYoG/">
    <img class="icono-footer" src="{{ url_for('static', filename='img/facebook.png') }}" alt="Facebook" />
    </a>
    <a href="https://www.instagram.com/ut_tlaxcala?igsh=MWNpMjgyNmxvcjNodA==">
    <img class="icono-footer" src="{{ url_for('static', filename='img/logotipo-de-instagram.png') }}" alt="Instagram" />
    </a>
    <a href="https://chat.whatsapp.com/IuDjMt9CBicDloHkIPTy5F">
    <img class="icono-footer" src="{{ url_for('static', filename='img/whatsapp.png') }}" alt="WhatsApp" />
    </a>
    </div>
    </div>

    <!-- Columna 2: Horario -->
    <div class="col-md-4 footer-col">
        <p><strong>Horario de atención:</strong></p>
        <p>Lunes a Viernes</p>
        <p>09:00 - 17:00 hrs</p>
    </div>

    <!-- Columna 3: Ubicación -->
    <div class="col-md-4 footer-col">
        <p><strong>Ubicación:</strong></p>
        <a href="https://maps.app.goo.gl/Uj8eRuzkXFUboarS7">
    <img class="mapa-footer" src="{{ url_for('static', filename='img/mapa.png') }}" alt="Mapa de ubicación" />
        </a>
    </div>

    </div>

    <div class="text-center mt-4">
        <p class="texto-copy mb-0">© 2025 Taller UTT - Todos los derechos reservados</p>
    </div>
    </div>
</footer>
</body>
</html>